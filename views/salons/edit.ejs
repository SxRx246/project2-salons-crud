<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Salon</title>

    <script>
        function addService() {
            const serviceSection = document.getElementById('serviceSection');
            const serviceDiv = document.createElement('div');
            serviceDiv.className = 'service';

            serviceDiv.innerHTML = `
                <label>Service Name:</label>
                <input type="text" name="serviceName[]" required>
                <label>Service Price:</label>
                <input type="number" name="servicePrice[]" required>
                <label>Description:</label>
                <input type="text" name="serviceDescription[]" required>
            `;

            serviceSection.appendChild(serviceDiv);
        }
    </script>
</head>

<body>
    <h1>Edit Salon</h1>

    <form action="/salons/<%= foundSalon._id %>?_method=PUT" method="post">
        <label for="name">Salon Name:</label>
        <input type="text" name="name" id="name" value="<%= foundSalon.name %>" required>

        <label for="location">Salon Location:</label>
        <input type="text" name="location" id="location" value="<%= foundSalon.location %>" required>

        <label for="openingTime">Opening Time:</label>
        <input type="time" id="openingTime" name="openingTime" value="<%= foundSalon.openingTime %>" required />

        <label for="closingTime">Closing Time:</label>
        <input type="time" id="closingTime" name="closingTime" value="<%= foundSalon.closingTime %>" required />

        <label for="workingDays">Working Days</label>
        <select name="workingDays" id="workingDays" multiple required>
            <option value="Sun" <%= foundSalon.workingDays.includes('Sun') ? 'selected' : '' %>>Sun</option>
            <option value="Mon" <%= foundSalon.workingDays.includes('Mon') ? 'selected' : '' %>>Mon</option>
            <option value="Tue" <%= foundSalon.workingDays.includes('Tue') ? 'selected' : '' %>>Tue</option>
            <option value="Wed" <%= foundSalon.workingDays.includes('Wed') ? 'selected' : '' %>>Wed</option>
            <option value="Thu" <%= foundSalon.workingDays.includes('Thu') ? 'selected' : '' %>>Thu</option>
            <option value="Fri" <%= foundSalon.workingDays.includes('Fri') ? 'selected' : '' %>>Fri</option>
            <option value="Sat" <%= foundSalon.workingDays.includes('Sat') ? 'selected' : '' %>>Sat</option>
        </select>

        <div id="serviceSection">
            <% foundSalon.services.forEach(service => { %>
                <div class="service">
                    <label>Service Name:</label>
                    <input type="text" name="serviceName[]" value="<%= service.name %>" required>
                    <label>Service Price:</label>
                    <input type="number" name="servicePrice[]" value="<%= service.price %>" required>
                    <label>Description:</label>
                    <input type="text" name="serviceDescription[]" value="<%= service.description %>" required>
                </div>
            <% }) %>
        </div>

        <button type="button" onclick="addService()">Add Service</button>
        <button type="submit">Update Salon</button>
    </form>
    
    <a href="/salons">Back to salons</a>
</body>

</html>